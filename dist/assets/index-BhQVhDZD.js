(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))h(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&h(r)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function h(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();class c{constructor(t){this.canvasHeight=t,this.width=120,this.height=120,this.x=50,this.y=this.canvasHeight-this.height-50,this.vy=0,this.gravity=.6,this.jumpStrength=-18,this.isJumping=!1,this.img=new Image,this.img.src="/src/assets/santa.png",this.shirtlessImg=new Image,this.shirtlessImg.src="/src/assets/santa_shirtless.png",this.useShirtless=!1}jump(){this.isJumping||(this.vy=this.jumpStrength,this.isJumping=!0)}update(){this.y+=this.vy,this.y<this.canvasHeight-this.height-50?(this.vy+=this.gravity,this.isJumping=!0):(this.vy=0,this.y=this.canvasHeight-this.height-50,this.isJumping=!1)}draw(t){t.save();const e=this.useShirtless?this.shirtlessImg:this.img;e.complete?t.drawImage(e,this.x,this.y,this.width,this.height):(t.fillStyle="red",t.fillRect(this.x,this.y,this.width,this.height)),t.restore()}setShirtless(t){this.useShirtless=t}}class l{constructor(t,e){this.canvasWidth=t,this.canvasHeight=e,this.obstacles=[],this.speed=5,this.spawnTimer=0,this.spawnInterval=100+Math.random()*100,this.image=new Image,this.image.src="/src/assets/tree.png"}update(t){this.spawnTimer++,this.spawnTimer>this.spawnInterval&&(this.spawnObstacle(),this.spawnTimer=0,this.spawnInterval=(80+Math.random()*100)/(t/5)),this.obstacles.forEach(e=>{e.x-=t}),this.obstacles=this.obstacles.filter(e=>e.x+e.width>0)}spawnObstacle(){const t=90+Math.random()*20,h={x:this.canvasWidth,y:this.canvasHeight-t-50,width:60,height:t,passed:!1};this.obstacles.push(h)}draw(t){this.obstacles.forEach(e=>{this.image.complete?t.drawImage(this.image,e.x,e.y,e.width,e.height):(t.fillStyle="green",t.fillRect(e.x,e.y,e.width,e.height))})}checkCollision(t){return this.obstacles.some(e=>t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y)}reset(){this.obstacles=[],this.spawnTimer=0}}const d="/assets/jump-CF_tEUBy.mp3";class o{constructor(){try{this.ctx=new(window.AudioContext||window.webkitAudioContext),this.jumpAudio=new o(d),this.jumpAudio.volume=.5,this.jumpAudio.load(),this.ready=!0}catch(t){console.error("Audio init failed:",t),this.ready=!1}}playJump(){if(this.ready)try{const t=this.jumpAudio.cloneNode();t.volume=.5,t.play().catch(e=>console.error("Audio play failed",e))}catch(t){console.error("Play jump failed:",t)}}playScore(){this.ctx.state==="suspended"&&this.ctx.resume();const t=this.ctx.createOscillator(),e=this.ctx.createGain();t.type="sine",t.frequency.setValueAtTime(600,this.ctx.currentTime),t.frequency.exponentialRampToValueAtTime(1e3,this.ctx.currentTime+.1),e.gain.setValueAtTime(.05,this.ctx.currentTime),e.gain.linearRampToValueAtTime(0,this.ctx.currentTime+.1),t.connect(e),e.connect(this.ctx.destination),t.start(),t.stop(this.ctx.currentTime+.1)}playGameOver(){this.ctx.state==="suspended"&&this.ctx.resume();const t=this.ctx.createOscillator(),e=this.ctx.createGain();t.type="sawtooth",t.frequency.setValueAtTime(400,this.ctx.currentTime),t.frequency.exponentialRampToValueAtTime(100,this.ctx.currentTime+.5),e.gain.setValueAtTime(.1,this.ctx.currentTime),e.gain.linearRampToValueAtTime(0,this.ctx.currentTime+.5),t.connect(e),e.connect(this.ctx.destination),t.start(),t.stop(this.ctx.currentTime+.5)}playMilestone(){if(this.ready)try{this.ctx.state==="suspended"&&this.ctx.resume();const t=this.ctx.currentTime;[440,554,659].forEach((e,h)=>{const i=this.ctx.createOscillator(),a=this.ctx.createGain();i.type="triangle",i.frequency.setValueAtTime(e,t+h*.1),a.gain.setValueAtTime(.1,t+h*.1),a.gain.exponentialRampToValueAtTime(.01,t+h*.1+.5),i.connect(a),a.connect(this.ctx.destination),i.start(t+h*.1),i.stop(t+h*.1+.5)})}catch(t){console.error(t)}}}class u{constructor(t,e){this.canvas=t,this.ctx=t.getContext("2d"),this.ui=e,this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.audio=new o,window.addEventListener("resize",()=>{this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,!this.isRunning&&!this.isGameOver&&(this.santa.canvasHeight=this.canvas.height,this.santa.y=this.canvas.height-this.santa.height-50)}),this.santa=new c(this.canvas.height),this.obstacleManager=new l(this.canvas.width,this.canvas.height),this.gameSpeed=5,this.initialSpeed=5,this.score=0,this.wallet=2e3,this.isRunning=!1,this.isGameOver=!1,this.victory=!1,this.animationId=null,this.milestone1Reached=!1,this.milestone2Reached=!1,this.milestone3Reached=!1,this.event100Reached=!1,this.event110Reached=!1,this.event120Reached=!1,this.groundImage=new Image,this.groundImage.src="/src/assets/ground.png",this.bgX=0,this.loop=this.loop.bind(this)}start(){this.isRunning||(this.isRunning=!0,this.isGameOver=!1,this.isRunning=!0,this.isGameOver=!1,this.victory=!1,this.score=0,this.wallet=2e3,this.milestone1Reached=!1,this.milestone2Reached=!1,this.milestone3Reached=!1,this.event100Reached=!1,this.event110Reached=!1,this.event120Reached=!1,this.event130Reached=!1,this.ui.updateWallet(this.wallet),this.gameSpeed=this.initialSpeed,this.santa=new c(this.canvas.height),this.obstacleManager.reset(),this.bgX=0,this.ui.showScoreBoard(),this.ui.hideStartScreen(),this.ui.hideGameOverScreen(),this.ui.hideVictoryScreen(),this.ui.hideNotification(),this.loop())}stop(){this.isRunning=!1,cancelAnimationFrame(this.animationId)}gameOver(){this.stop(),this.isGameOver=!0,this.ui.showGameOverScreen(Math.floor(this.score))}winGame(){this.stop(),this.victory=!0,this.audio.playScore(),this.ui.showVictoryScreen()}handleInput(){this.isRunning?this.santa.isJumping||(this.santa.jump(),this.audio.playJump()):this.isGameOver||this.victory?this.start():this.start()}update(){if(!this.isRunning)return;if(this.santa.update(),this.obstacleManager.update(this.gameSpeed),this.obstacleManager.checkCollision(this.santa)){this.audio.playGameOver(),this.gameOver();return}this.gameSpeed+=.003,this.score+=.1;const t=Math.floor(this.score);if(t>=100&&!this.event100Reached&&(this.event100Reached=!0,this.ui.showNotification("DSA Repeat -1000"),this.wallet-=1e3,this.ui.updateWallet(this.wallet),this.audio.playMilestone()),t>=110&&!this.event110Reached&&(this.event110Reached=!0,this.ui.showNotification("DSA Repeat -100"),this.wallet-=100,this.ui.updateWallet(this.wallet),this.audio.playMilestone()),t>=120&&!this.event120Reached&&(this.event120Reached=!0,this.ui.showNotification("DSA Repeat -100"),this.wallet-=100,this.ui.updateWallet(this.wallet),this.audio.playMilestone()),t>=130&&!this.event130Reached&&(this.event130Reached=!0,this.santa.setShirtless(!0),this.audio.playMilestone()),t>=50&&!this.milestone1Reached&&(this.milestone1Reached=!0,this.ui.showNotification("Congratulations on completing Week 1-6!"),this.audio.playMilestone()),t>=250&&!this.milestone2Reached&&(this.milestone2Reached=!0,this.ui.showNotification("Congratulations on completing Week 7-21!"),this.audio.playMilestone()),t>=500&&!this.milestone3Reached){this.milestone3Reached=!0,this.ui.showNotification("Congratulations on completing Week 22-30! Baby Arriving!"),this.winGame();return}this.ui.updateScore(t),this.bgX-=this.gameSpeed,this.bgX<=-this.canvas.width&&(this.bgX=0)}draw(){if(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.groundImage.complete){let t=this.canvas.height-50;this.ctx.drawImage(this.groundImage,this.bgX,t,this.canvas.width,50),this.ctx.drawImage(this.groundImage,this.bgX+this.canvas.width,t,this.canvas.width,50)}else this.ctx.fillStyle="#eee",this.ctx.fillRect(0,this.canvas.height-50,this.canvas.width,50);this.santa.draw(this.ctx),this.obstacleManager.draw(this.ctx)}loop(){this.isRunning&&(this.update(),this.draw(),this.animationId=requestAnimationFrame(this.loop))}}const m={startScreen:document.getElementById("start-screen"),gameOverScreen:document.getElementById("game-over-screen"),victoryScreen:document.getElementById("victory-screen"),notificationBar:document.getElementById("notification-bar"),notificationText:document.getElementById("notification-text"),walletAmount:document.getElementById("wallet-amount"),scoreBoard:document.getElementById("score-board"),scoreEl:document.getElementById("score"),finalScoreEl:document.getElementById("final-score"),hideStartScreen(){this.startScreen.classList.add("hidden")},showScoreBoard(){this.scoreBoard.classList.remove("hidden")},showGameOverScreen(s){this.finalScoreEl.innerText=s,this.gameOverScreen.classList.remove("hidden")},hideGameOverScreen(){this.gameOverScreen.classList.add("hidden")},showVictoryScreen(){this.victoryScreen.classList.remove("hidden")},hideVictoryScreen(){this.victoryScreen.classList.add("hidden")},showNotification(s){this.notificationText.innerText=s,this.notificationBar.classList.remove("hidden"),this.notificationBar.classList.add("visible"),this.notificationTimeout&&clearTimeout(this.notificationTimeout),this.notificationTimeout=setTimeout(()=>{this.hideNotification()},3e3)},hideNotification(){this.notificationBar.classList.remove("visible"),this.notificationBar.classList.add("hidden")},updateScore(s){this.scoreEl.innerText=s},updateWallet(s){this.walletAmount.innerText=s}},g=document.getElementById("game-canvas"),n=new u(g,m);window.addEventListener("keydown",s=>{(s.code==="Space"||s.code==="ArrowUp")&&n.handleInput()});window.addEventListener("touchstart",s=>{s.preventDefault(),n.handleInput()},{passive:!1});document.getElementById("restart-btn").addEventListener("click",()=>{n.start()});document.getElementById("restart-victory-btn").addEventListener("click",()=>{n.start()});
